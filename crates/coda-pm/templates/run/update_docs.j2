You are updating the project documentation after completing all development, review, and verification phases for a feature.

## Feature Context

**Feature slug**: `{{ state.feature.slug }}`
**Branch**: `{{ state.git.branch }}`

## Design Specification

{{ design_spec }}

## Task

Perform two documentation updates, then commit the changes.

### 1. Regenerate `.coda.md` (Developer-Facing Architecture Reference)

Fully regenerate the `.coda.md` file at the repository root. This file is a **developer-facing architecture reference** consumed by AI agents and developers who need to understand the codebase. It must reflect the **current** state of the codebase after all changes made in this feature.

**Steps:**
1. Read the existing `.coda.md` to understand the established format
2. Explore the full codebase structure: directory layout, workspace members (e.g., `Cargo.toml`, `package.json`), key modules, public APIs, trait definitions, type hierarchies
3. Write a fresh `.coda.md` with the following sections:
   - **Project Overview** — One paragraph: what the project does, the problem it solves, and its core value proposition
   - **Architecture Overview** — ASCII box diagram showing module/crate/package relationships and layer boundaries. Below the diagram, briefly describe each module's responsibility and inter-module dependencies
   - **Interface Design** — List the key traits, interfaces, or abstract types that define module boundaries. For each, state: name, module path, what it abstracts, and why it exists. Include important public API signatures where they clarify contracts. **Highlight any new interfaces introduced by this feature**
   - **Data Flow** — Describe the primary data processing pipelines (e.g., request handling, feature lifecycle, message processing). Use ASCII flow diagrams where helpful. For each flow, list the stages and data transformations. **Highlight any new or modified data flows from this feature**
   - **Core Data Structures** — Document the key types, enums, and structs that form the domain model. Describe their relationships, state machines (if any), and serialization conventions. **Include any new types introduced by this feature**
   - **Module Guide** — Table mapping directory paths to their purposes
   - **Tech Stack & Dependencies** — Languages, frameworks, key dependencies with their roles
   - **Development Workflow** — Build, test, format, lint commands
   - **Key Patterns & Conventions** — Architectural patterns (e.g., actor model, pipeline), error handling strategy, concurrency model, configuration approach, and project-specific conventions
4. Overwrite `.coda.md` completely — do not append or merge, replace the entire file
5. Keep the header: `# CODA Repository Overview` and `> Auto-generated by CODA. Keep in sync with the codebase.`
6. Keep under 300 lines

### 2. Update `README.md` (User-Facing Usage Guide)

Update the `README.md` at the repository root. This file targets **external users and system operators** — people who want to understand what the system does and how to use it. It should NOT contain internal architecture details or development guidelines (those belong in `.coda.md` and `CLAUDE.md`).

**Target audience**: End users, system administrators, evaluators deciding whether to adopt the project.

**Required sections** (ensure these exist; add missing ones):
- **Project Introduction** — What is this project? What problem does it solve? (elevator pitch)
- **Features** — Bullet list of key capabilities
- **Prerequisites** — Required tools, runtime, API keys, etc.
- **Installation** — Step-by-step installation instructions
- **Quick Start** — Minimal example to get started immediately
- **Configuration** — Available configuration options with examples
- **CLI / API Reference** — Command reference or API endpoint summary (as applicable)
- **Development** — Brief section pointing to `CLAUDE.md` for coding standards and `.coda.md` for architecture details (keep this section short)
- **License** — License information

**Update rules:**
1. Read the current `README.md` (if it exists)
2. Identify which sections are affected by this feature (new capabilities, changed commands, new configuration options, etc.)
3. Update only the affected sections — do **not** remove existing valid content
4. If `README.md` does not exist, create a complete one with all sections above
5. Do NOT include internal architecture diagrams, trait/interface documentation, or data flow details (those belong in `.coda.md`)

### 3. Commit Changes

After updating both files, commit them:

```bash
git add .coda.md README.md
git commit -m "docs({{ state.feature.slug }}): update .coda.md and README.md"
```

## Validation

After committing, verify:
1. `.coda.md` exists, is non-empty, and includes Architecture Overview, Interface Design, and Data Flow sections
2. `README.md` exists, is non-empty, and focuses on usage (not internal architecture)
3. Both files are well-formatted Markdown

If either file is missing or empty, fix the issue before reporting completion.
